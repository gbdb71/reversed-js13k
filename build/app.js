'use strict';navigator.userAgent.match(/Android/i)&&(document.body.className+=" and");var d=document.createElement("p");d.style.cssText="pointer-events:auto";"auto"!=d.style.pointerEvents&&(document.body.className+=" nop");d=void 0;"undefined"==typeof requestAnimationFrame&&(["moz","webkit","ms"].some(function(a){a=this[a+"RequestAnimationFrame"];if("function"==typeof a)return requestAnimationFrame=a})||(requestAnimationFrame=function(a){return setTimeout(a,16)}));var g=document.getElementById.bind(document),k=16/9,l,p=1,q=1,r=0,t=0,u=!1,v=g("a"),w=g("b"),x=g("c"),y=g("i"),z=g("p"),A=g("s"),B=g("t");w.width=x.width=960;w.height=x.height=540;
function C(){var a=window.innerWidth,c=window.innerHeight,b;a/c>k?a=c*k:c=a/k;v.style.width=a+"px";v.style.height=c+"px";var e=b=.5*(window.innerWidth-a);v.style.left=e+"px";e=c=.5*(window.innerHeight-c);v.style.top=e+"px";z.style.left=b+"px";z.style.top=c+"px";l=a/960;D();A.style[E]="scale("+l+")translate(600px,240px)";B.style[E]="scale("+l+")translate(40px,160px)"}var E="transform";E in v.style||(E="webkitTransform");
function D(){z.style[E]="scale("+l+")translate("+r+"px,"+(u?t+90:t)+"px)scale("+p+","+(u?-q:q)+")"}C();window.addEventListener("resize",C);window.addEventListener("orientationchange",C);var F=[";     xxx;     x;;;   xx  xx   x;   xx   xx xxx".split(";"),";;;;      xxxx;      xxxx;      xxxx".split(";"),"           vv;;;;;;     ^^".split(";"),"   vvvvvv;;;     xxxxxx;;;       ^^^^^^".split(";"),"   vvvv    vvvv;;;;;         xx;         xx".split(";"),"      vvxxvv;        xx;;;;;        ^^".split(";"),"    vvvvxxvvv;;    ^       ^;   <x       x>;    v       v;        ^^;        xx".split(";"),";xxxxx;    x;    x;    x;xxxxx;".split(";")],G=";One small step for a man;Walk softly;Overpass;Easy mode;Go precisely;Cowards die in shame;This was a triumph".split(";"),
H=";Click or tap anywhere on the screen to invert gravity;Avoid spikes: they kill you to death!;;;;;Reload the page to start a new game".split(";");var I={"▄":"n","▀":"*","█":"Ш","░":"/"};function aa(a){var c=document.createElement("span");c.appendChild(document.createTextNode(a));c.className="t";z.appendChild(c);a=c.offsetWidth;z.removeChild(c);return a}for(var ba=aa("x"),ca=!1,da=4;da--;)if(aa("▄▀█░"[da])!=ba){ca=!0;break}
var ea="  █▀▀▀▀▀█   ; ▄█▀▀▀▀▀▀▀▀ ; ▀▀▀▀▀▀▀▀▀▄ ;   ▀▀▀▀▀▀█  ;  ▀▀█▀▀▀█▀  ;  ▀█▀▀▀█▀   ".split(";").map(function(a){return(" ▄▄▄▄▀▀▀▀▀▄ \n█░         █\n█░░  >   < █\n█░░░`  ^  `█\n ▀█░░    █▀ \n o█░░░   █o \n"+a).replace(/./g,function(a){return ca&&I[a]?I[a]:a})}),J=document.createElement("p"),K="";ea.forEach(function(a,c){var b=document.createElement("span");b.className="b b"+c;b.appendChild(document.createTextNode(ea[c]));J.appendChild(b);K+="p.a"+c+" .b"+c+"{display:block}"});var fa=document.createElement("style");
fa.appendChild(document.createTextNode(K));document.head.appendChild(fa);J.className="a5";z.appendChild(J);p=92/J.clientWidth;q=90/J.clientHeight;r=434;t=274;C();function ga(a){for(var c=4;c--;)a(),L.translate(21,0),L.rotate(.5*Math.PI)}
function ia(){var a=L;a.scale(8,8);a.fillStyle="#fff";ga(function(){a.fillRect(.5,.5,7,7);a.fillRect(8.5,.5,4,3)});a.fillRect(1.5,1.5,18,18);a.fillStyle="#7C7B7C";a.fillRect(2,2,17,17);a.fillStyle="#F9B6C3";a.fillRect(10,2,1,17);a.fillRect(2,10,17,1);a.fillStyle="#E5DDDC";a.beginPath();ga(function(){a.rect(1,1,6,3);a.rect(1,4,5,1);a.rect(1,5,4,1);a.rect(1,6,3,1);a.rect(9,1,3,2);a.rect(8,5,5,4);a.rect(13,6,1,2);a.rect(14,7,1,1)});a.fill();a.fillStyle="#F478A0";a.beginPath();a.rect(7,9,7,2);a.rect(8,
8,2,4);a.rect(11,8,2,4);a.rect(9,10,3,3);a.rect(10,13,1,1);a.fill()};var ja=["xxxxxxxxxxxxxxxx"],F=F.map(function(a){return ka(ja.concat(a).concat(ja))});
function ka(a){function c(a){if(a.a){var b=a.pop();a.push([h,f,b[2]+1])}else a.push([h,f,1]),a.a=!0}var b=[],e=[],h,f;for(f=9;f--;)for(b.a=!1,e.a=!1,h=16;h--;)"x"==a[f][h]?(8!=f&&"x"!=a[f+1][h]?c(b):b.a=!1,0!=f&&"x"!=a[f-1][h]?c(e):e.a=!1):(b.a=!1,e.a=!1);var m=[];for(h=b.length;h--;)m.push(la(b[h],1));for(h=e.length;h--;)m.push(la(e[h]));m.sort(function(a,b){return b[0].y-a[0].y});b=[];e=[];for(h=16;h--;)for(b.a=!1,e.a=!1,f=9;f--;)"x"==a[f][h]?(15!=h&&"x"!=a[f][h+1]?c(b):b.a=!1,0!=h&&"x"!=a[f][h-
1]?c(e):e.a=!1):(b.a=!1,e.a=!1);var n=[];for(h=b.length;h--;)n.push(ma(b[h],1));for(h=e.length;h--;)n.push(ma(e[h]));n.sort(function(a,b){return b[0].x-a[0].x});b=[];for(f=9;f--;)for(b.a=!1,h=16;h--;)a[f][h]in{"^":1,v:1,"<":1,">":1}?c(b):b.a=!1;b=b.map(function(a){return{x:60*a[0],y:60*a[1],width:60*a[2],height:60}});return{c:a,p:m,j:n,l:b}}function la(a,c){var b=60*(a[1]+(0|c));return[{x:60*a[0],y:b},{x:60*(a[0]+a[2]),y:b}]}
function ma(a,c){var b=60*(a[0]+(0|c));return[{x:b,y:60*a[1]},{x:b,y:60*(a[1]+a[2])}]};var M=[{x:"#FFF691",i:"#F7CA77",p:"#F602FD"},{x:"#04FEFE",i:"#04C0FB",p:"#E1FF5F"},{x:"#FF96F2",i:"#FD2AA1",p:"#F6FE48"},{x:"#27DE78",i:"#60FD93",p:"#FE035D"}],N=0,O=M[N];function na(){++N==M.length&&(N=0);O=M[N]};var P=w.getContext("2d"),oa=Q(3),pa=Q(6),qa=Q(9);function R(a,c){return~~(Math.random()*(c-a+1))+a}function Q(a){for(var c=[],b=10*(12-a);b--;)c.push({x:R(0,960-a),y:R(60,480-a)});return c}function ra(a){P.clearRect(0,0,960,540);S(oa,3,"#5B8094",a);S(pa,6,"#719CB9",2*a);S(qa,9,"#85B3C5",3*a)}function S(a,c,b,e){P.beginPath();for(var h=10*(12-c);h--;){var f=a[h];f.y-=e;60>f.y?(f.x=R(0,960-c),f.y+=540):480<f.y&&(f.x=R(0,960-c),f.y-=540);P.rect(f.x,f.y,c,c)}P.fillStyle=b;P.fill()};var L=x.getContext("2d");function sa(a){L.font=a+"px 'Segoe UI','Helvetica Neue',sans-serif"}L.textAlign="center";
function ta(a){var c,b,e=F[a];L.clearRect(0,0,960,540);L.beginPath();for(c=16;c--;)for(b=9;b--;)"x"==e.c[b][c]&&L.rect(60*c,60*b,60,60);L.fillStyle=O.x;L.fill();L.fillStyle=L.strokeStyle=O.i;a%2?ua():va();L.beginPath();for(c=16;c--;)for(b=9;b--;)"^"==e.c[b][c]?wa(c,b,0):"v"==e.c[b][c]?wa(c,b,1):"<"==e.c[b][c]?xa(c,b,0):">"==e.c[b][c]&&xa(c,b,1);L.fillStyle="#FEFDFB";L.fill();L.save();L.beginPath();for(c=16;c--;)for(b=9;b--;)"^"==e.c[b][c]?L.rect(60*c,60*b,60,30):"v"==e.c[b][c]?L.rect(60*c,60*(b+.5),
60,30):"<"==e.c[b][c]?L.rect(60*c,60*b,30,60):">"==e.c[b][c]&&L.rect(60*(c+.5),60*b,30,60);L.globalCompositeOperation="source-atop";L.fillStyle="#FE0302";L.fill();L.restore();L.beginPath();e.p.concat(e.j).forEach(function(a){L.moveTo(a[0].x,a[0].y);L.lineTo(a[1].x,a[1].y)});L.lineCap="square";L.lineWidth=2;L.strokeStyle=O.p;L.stroke();sa(25);G[a]&&ya(G[a],521);H[a]&&ya("PROTIP: "+H[a],40)}
function ya(a,c){var b=c-25,e=b+16,h=e+16,f=.5*(960-L.measureText(a).width);L.beginPath();L.moveTo(f,b);L.lineTo(960-f,b);L.quadraticCurveTo(960-f+16,b,960-f+16,e);L.quadraticCurveTo(960-f+16,h,960-f,h);L.lineTo(f,h);L.quadraticCurveTo(f-16,h,f-16,e);L.quadraticCurveTo(f-16,b,f,b);L.fillStyle="rgba(0,0,0,0.5)";L.fill();L.fillStyle="#fff";L.fillText(a,480,c,900)}
function wa(a,c,b){L.moveTo(60*a,60*(c+(b^=1)));L.lineTo(60*(a+.25),60*(c+(b^=1)));L.lineTo(60*(a+.5),60*(c+(b^=1)));L.lineTo(60*(a+.75),60*(c+(b^=1)));L.lineTo(60*(a+1),60*(c+(b^1)))}function xa(a,c,b){L.moveTo(60*(a+(b^=1)),60*c);L.lineTo(60*(a+(b^=1)),60*(c+.25));L.lineTo(60*(a+(b^=1)),60*(c+.5));L.lineTo(60*(a+(b^=1)),60*(c+.75));L.lineTo(60*(a+(b^1)),60*(c+1))}
function ua(){var a=2,c=6.26E-4,b=.5>Math.random()?-.1:.1,e;.5>Math.random()&&(a=4,c=-c);L.save();L.translate(480,270);L.rotate(.5>Math.random()?.5*b:b);L.translate(-480,-270);L.globalCompositeOperation="source-atop";for(b=-10;58>b;++b){L.beginPath();for(e=-10;37>e;++e)L.arc(20*(b+.5),20*(e+.5),a+=c,0,2*Math.PI);L.fill()}L.restore()}
function va(){var a=10*Math.sqrt(2),c;L.save();L.translate(480,270);L.rotate(.25*(.5>Math.random()?-1:1)*Math.PI);L.translate(-479.5,-269.5);L.globalCompositeOperation="source-atop";L.beginPath();for(c=-960;1920>c;c+=a)L.moveTo(c,-540),L.lineTo(c,1080);L.lineWidth=2;L.stroke();L.restore()}ta(0);function za(a,c,b,e){return((c.x-a.x)*(b.y-a.y)-(b.x-a.x)*(c.y-a.y))*((c.x-a.x)*(e.y-a.y)-(e.x-a.x)*(c.y-a.y))}function Aa(a,c,b){var e;if(!(e=b[0].y<a[0].y==b[0].y<c[0].y)&&(e=0<za(a[0],c[0],b[0],b[1])&&0<za(a[1],c[1],b[0],b[1]))){var h=b[0];e=h.x-a[0].x;var h=h.y-a[0].y,f=a[1].x-a[0].x,m=c[0].x-a[0].x,n=c[0].y-a[0].y,ha=f*n-0*m,f=-(0*e-f*h)/ha;e=(e*n-m*h)/ha;e=!(0<=f&&1>=f&&0<=e&&1>=e)}e||(c[0].y=c[1].y=b[0].y+(a[0].y>c[0].y?1:-1),c.b=0,c.h=!0)};function T(){u=!1;return{x:10,y:225,width:92,height:90,g:.1,h:!1,f:4,b:0}}
function U(a){a>=F.length&&(a=F.length-1);ta(Ba=a);Ca=F[a].p;Da=F[a].j;V=F[a].l;if(a==F.length-1){L.save();L.translate(706,314);ia();L.restore();a=Math.min(Math.max(420,690),680);var c=Math.min(Math.max(440,710),700);L.beginPath();L.moveTo(420,100);L.lineTo(700,100);L.quadraticCurveTo(740,100,740,140);L.lineTo(740,260);L.quadraticCurveTo(740,300,700,300);L.lineTo(c,300);L.lineTo(700,330);L.lineTo(a,300);L.lineTo(420,300);L.quadraticCurveTo(380,300,380,260);L.lineTo(380,140);L.quadraticCurveTo(380,
100,420,100);L.fillStyle="rgba(229,221,220,0.6)";L.fill();L.lineWidth=2;L.strokeStyle="#fff";L.stroke();sa(40);L.fillStyle="#101010";L.fillText("You've beat the game,",560,150,320);L.fillText("ASCII person.",560,192,320);L.fillText("But your princess is",560,234,320);L.fillText("in another castle.",560,276,320)}}var W=T(),Ba,Ca,Da,V;U(0);var X;
function Ea(){var a=Date.now(),c=a-X;X=a;W.h&&(W.f+=.1*c,4<W.f&&(W.f=4));W.b+=c*W.g;var b;b=0>W.b?[{x:W.x,y:W.y}]:[{x:W.x,y:W.y+W.height}];b.push({x:b[0].x+W.width,y:b[0].y});var e=[{x:b[0].x+W.f,y:b[0].y+W.b}];e.push({x:e[0].x+W.width,y:e[0].y});e.b=W.b;e.h=!1;Ca.forEach(function(a){Aa(b,e,a)});0>W.b?W.y=e[0].y:W.y=e[0].y-W.height;W.b=e.b;W.h=e.h;b=[{x:W.y,y:W.x+W.width}];b.push({x:b[0].x+W.height,y:b[0].y});e=[{x:b[0].x+W.b,y:b[0].y+W.f}];e.push({x:e[0].x+W.height,y:e[0].y});e.b=W.f;Da.forEach(function(a){a=
[{x:a[0].y,y:a[0].x},{x:a[1].y,y:a[1].x}];Aa(b,e,a)});W.x=e[0].y-W.width;W.f=e.b;J.className="a"+(a>>>6)%6;return c}var Y=!1;function Fa(){var a=Date.now(),c=a-X;X=a;Y||(requestAnimationFrame(Fa),ra(c*W.g))}X=Date.now();requestAnimationFrame(Fa);function Ga(){requestAnimationFrame(Ga);940<W.x+W.width&&(W=T(),na(),U(Ba+1));for(var a=V.length;a--;){var c=V[a],b=W;if(b.x<c.x+c.width&&b.x+b.width>c.x&&b.y<c.y+c.height&&b.height+b.y>c.y){W=T();break}}ra(Ea()*W.g);r=W.x;t=W.y;D()}
function Ha(a){a.preventDefault();Y||(Y=!0,A.style.display=B.style.display="none",y.style.pointerEvents="auto",W=T(),na(),U(1),X=Date.now(),requestAnimationFrame(Ga))}A.addEventListener("click",Ha);A.addEventListener("touchstart",Ha);function Z(a){a.preventDefault();W.g=-W.g;u=!u}document.body.addEventListener("keyup",function(a){32!=a.which&&32!=a.keyCode||Z(a)});y.addEventListener("click",Z);y.addEventListener("touchstart",Z);
